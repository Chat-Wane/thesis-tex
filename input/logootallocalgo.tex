
\small
\algrenewcommand{\algorithmiccomment}[1]{\hskip2em$\rhd$ #1}

\newcommand{\comment}[1]{$\rhd$ #1}

\newcommand{\LINEFOR}[2]{%
  \algorithmicfor\ {#1}\ \algorithmicdo\ {#2} %
  }

\newcommand{\LINEWHILE}[2]{%
  \algorithmicwhile\ {#1}\ \algorithmicdo\ {#2} %
  }

\newcommand{\LINEIFTHEN}[2]{%
  \algorithmicif\ {#1}\ \algorithmicthen\ {#2} %
  }

\newcommand{\INDSTATE}[1][1]{\State\hspace{\algorithmicindent}}

\begin{algorithmic}[1]
  \Function{allocate}
  {$p\in\mathcal{I},\, \alpha\in\mathcal{A},\, q\in\mathcal{I}$}
  \State \textbf{let} $pi,p\alpha \leftarrow p$;
  \State \textbf{let} $qi,q\alpha \leftarrow q$;
  \State \textbf{let} $interval,\, depth \leftarrow getInterval(pi,\,qi)$;
  
  \State \textbf{let}
  $copy \leftarrow min(truncate(pi,\, depth),\, truncate(qi,\, depth))$;

  \State \textbf{let} $toAdd \leftarrow random(min(interval,\,boundary))+1$;

  \For{$j \leftarrow depth-1$ \textbf{to} $0$}
  \State \textbf{let} $toAdd, \, copy[j]  \leftarrow divmod(copy[j] + toAdd)$;
  \EndFor

  \State \Return $\langle copy,\, \alpha\rangle$;
  \EndFunction
\end{algorithmic}
