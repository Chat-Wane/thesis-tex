
\section{LSEQ : une stratégie d'allocation polylogarithmique}

\LSEQ (abréviation pour \emph{polyLogarithimic SEQuence}) est une stratégie
d'allocation d'identifiants dont la taille est variable à la génération. Elle
alloue des identifiants dont la compléxité en espace dont la borne supérieur est
de l'ordre du polylogarithme comparé au nombre d'insertions dans la séquence.
Pour générer ses identifiants immuables et uniques, \LSEQ utilise un arbre
exponentiel comme structure de données, deux sous-stratégies d'allocations avec
objectifs antagonistes, et un composant permettant de choisir la stratégie.

\subsection{Principe général}

Puisqu'il est complexe de prédire un comportement d'édition, le principe est de
sacrifier des niveaux de l'arbre sachant qu'à un certain niveau, la récompense
compensera les pertes. En d'autres termes, même si \LSEQ choisit la mauvaise
sous-stratégie d'allocation à un certain niveau de l'arbre, à terme, la bonne
sous-stratégie sera choisie. Grâce à l'augmentation de l'espace d'allocation à
chaque niveau de l'arbre, les bénéfices vont couvrir les coûts des niveaux
perdus.


\subsection{Arbre exponentiel}

A l'opposé d'une structure d'arbre classique, un arbre exponentiel est un arbre
dont l'arité augmente avec sa profondeur. Ainsi, chacun de ses éléments possède
$c$-fois plus de fils que son parent. Par exemple, si l'on fixe $c$ à $2$, un
élément dont le parent possède $4$ fils en possède $8$, et chacun d'entre eux en
possède $16$ etc. Dans ce cas, il y a une augmentation quadratique du nombre de
fils en fonction de la profondeur qui s'ajoute à l'augmentation commune de
l'arbre. Ainsi, un arbre exponentiel de profondeur $k$ peut accueillir 
\begin{equation}
  n = \sum\limits_{i=0}^{k} 2^{(i^2-i)/2}\,\, identifiants.
\end{equation}


\TODO{figure}

Une telle structure a l'avantage d'adapter sa consommation en mémoire à la
taille du document. En effet, commencer l'édition avec une base de départ faible
reflète un petit document. Lorsque le document devient plus imposant, la
profondeur de l'arbre augmente, et par conséquent son arité, reflétant
l'augmentation de la taille du document.

Un identifiant \LSEQ est un suite d'entiers représentant le chemin de l'élément
dans l'arbre. Pour encoder cette suite d'entiers notée $[p_1.p_2\ldots p_k]$, il
faut $1$ bit supplémentaire à chaque profondeur de l'arbre. 

\begin{table}
  \centering
  \begin{tabular}{@{}lccc@{}}
    \toprule
    & Random & Monotonic & Worst \\ \cmidrule{2-4}
    Id.size & $O(\sqrt{log\,n})$ & $O(log\,n)$ & $O(n)$ \\ \midrule
    Id.bit-length & \multicolumn{3}{c}{ $\sum\limits_{i=1}^{k}b+i =
      kb + k(k+1)/2 = O(k^2)$} \\ \midrule
    Space complexity & $O(log\,n)$ & $O((log\,n)^2)$ &
    $O(n^2)$ \\ \bottomrule
  \end{tabular}
  \caption{Spatial complexity of \LSEQ. Where $n$ is the number
    of insert operations performed. $k$ is the size of an identifier, i.e.,
    the number of concatenations. And $b$ the starting bit-length of numbers
    composing the identifiers.}
\end{table}

\subsection{Sous-stratégies d'allocation}


\subsection{Choix de stratégie}


\begin{algorithm}
  \input{input/lseq/allocpathalgo.tex}
  \caption{\label{algo:allocpath}Allocation of the path.}
\end{algorithm}

\begin{figure}
  \centering
  \input{input/lseq/lseqtreeexample.tex}
  \caption{\label{fig:lseqtreeexample} Example of \LSEQ's exponential trees
    with two antagonist editing behaviours to create the sequence of characters
    $QWERTY$. Thanks to its hash function, \LSEQ transfers the allocation of
    paths to the sub-allocation functions designed for front-editing and
    end-editing at first and second level respectively for this
    example. Furthermore, the arity is doubled at each level of the
    tree. Contrarily to the example given in Figure~\ref{fig:allocpathexample},
    the trees do not grow linearly.}
\end{figure}

\begin{algorithm}
  \input{input/lseq/allocdesalgo.tex}
  \caption{\label{algo:allocdes}Allocation of the disambiguator.}
\end{algorithm}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../paper"
%%% End:
