
\section{État de l'art}
\label{editor:sec:stateoftheart}

Il est coutume de dire que les éditeurs collaboratifs répartis distribuent
l'écriture selon trois dimensions : Le temps, les lieux, et les organisations.
La figure~\ref{editor:fig:groupware} résume la distribution sur les deux
premières dimensions.  Nous nous intéresserons particulièrement aux participants
connectés en même temps en des lieux différents, ce qui correspond à la
problématique du temps réel. À cela nous ajoutons les participants connectés à
différents moments en des lieux différents, ce qui permet de travailler en mode
hors ligne.

\begin{figure}
  \begin{center}
    \input{input/editor/figgroupware.tex}
    \caption[Matrice de distribution des systèmes collaboratifs] {
      \label{editor:fig:groupware} Matrice de distribution des systèmes
      collaboratifs.}
  \end{center}
\end{figure}

Les éditeurs collaboratifs répartis autorisant l'édition temps réel dans les
navigateurs web sont centralisés. Entre autres, les éditeurs tels que Google
Docs~\cite{googledocs} ou Etherpad~\cite{etherpad} ont rendu l'édition
collaborative aisée pour les millions d'utilisateurs à travers le monde.

\begin{figure}
  \begin{center}
    \input{input/editor/figserviceprovider.tex}
    \caption[Fonctionnement des éditeurs centralisés]
    {\label{editor:fig:serviceprovider} Les transmissions aux clients connectés
      et les transformations d'opérations sont à la charge du fournisseur de
      services.}
  \end{center}
\end{figure}

La figure~\ref{editor:fig:serviceprovider} montre le fonctionnement de ces
éditeurs. Un serveur central possède le document. Les participants se connectent
à ce serveur (i.e. $e_1$, $e_2$, et $e_3$) ou à un serveur associé (i.e. $e_4$,
$e_5$, $e_6$, $e_7$) mis à disposition de manière élastique afin d'alléger la
charge de diffusion des messages du premier. Lorsque le collaborateur $e_1$
effectue une action telle que l'insertion d'un caractère, l'opération est émise
au serveur possédant le document. Celui-ci, fonctionnant avec une approche de
transformés opérationnels, transforme l'opération reçue vis-à-vis de toutes
celles que l'utilisateur n'avait pas encore reçu lors de la création de son
opération. La transformation s'avère toutefois moins coûteuse puisque seul le
serveur doit l'effectuer. En particulier, le vecteur de contexte transporté dans
les messages des approches OT décentralisées n'existe pas dans les versions
centralisée puisque seule importe la paire de versions de l'utilisateur et du
serveur. En revanche, le serveur est en charge de toutes les transformations. De
plus, il doit diffuser l'ensemble des changements aux participants. Le
fournisseur de service prend en charge la presque intégralité du coût de la
session d'édition. Pour les utilisateurs, se posent toujours les problèmes de
confidentialité : Le fournisseur de service voit les documents et peut en
utiliser le contenu à ses propres fins. Pire encore, la propriété du document
doit bien souvent être accordée au fournisseur de service. À cela s'ajoute le
problème du point individuel de défaillance : Lorsque le serveur hébergeant le
document tombe en panne, le document n'est plus accessible.

Malgré tous ces défauts, ces approches centralisées sont les plus populaires.
Jusqu'à présent, aucun éditeur décentralisé dans le navigateur web n'avait été
déployé. La récente technologie WebRTC permet d'établir des canaux de
communication d'un navigateur à l'autre. En d'autres termes, les applications
réellement décentralisée aussi facile d'accès que les applications web du Nuage
deviennent possibles.

\paragraph{WebRTC~\cite{webrtc}.} Acronyme de \emph{Web Real-Time
  Communication}.  Cette technologie permet l'établissement de canaux de
communication d'un navigateur web à l'autre, et ce, même en présence de
configurations réseaux complexes impliquant firewall, proxy, ou NAT (Network
Address Translation). Toutefois, WebRTC ne gère ni l'adressage, ni le routage.
Établir une connexion WebRTC requière une négociation où le nœud d'origine et le
nœud de réception s'envoient mutuellement des moyens d'accès distants dans
l'ordre définit du plus aisé au plus ardu. Par exemple, les échanges vont
d'abord concerner la boucle locale (\emph{localhost}), puis le réseau local
(e.g. $192.168.255.255$), puis l'internet\ldots Aussitôt que la négociation
s'achève avec succès, un canal de communication bidirectionnel est établi. Les
nœuds peuvent alors communiquer entre eux.

\begin{figure*}
  \begin{center}
    \subfloat[Des nœuds utilisent un médiateur pour se connecter]
    [\label{editor:fig:webrtcA}
    $e_1$ se connecte à $e_2$ via un médiateur.
    1: $e_1$ crée ses offres;
    2: $e_2$ récupère ces offres;
    3: $e_2$ crée ses offres en réponse;
    4: $e_1$: reçoit les offres et établit une connexion bidirectionnelle avec
    $e_2$. $e_3$ en fait de même avec $e_2$.
    La figure~\ref{editor:fig:webrtcB} décrit le réseau en résultant.]{
      \input{input/editor/figsignalingexampleA.tex}}
    \hspace{5pt}
    \subfloat[Des nœuds utilisent l'un des leurs comme médiateur]
    [\label{editor:fig:webrtcB}
    $e_1$ se connecte à $e_3$ en utilisant $e_2$ comme médiateur.
    1: $e_1$ envoie ses offres à $e_2$;
    2: $e_2$ redirige les offres à $e_3$;
    3: $e_3$ envoie ses offres en réponse à $e_2$;
    4: $e_2$ redirige les offres vers $e_1$ qui se connecte à $e_3$.]{
      \input{input/editor/figsignalingexampleB.tex}}
    \hspace{5pt}
    \subfloat[Réseau superposé en résultant]
    [\label{editor:fig:webrtcC}
    Le réseau superposé : Un réseau complètement connecté composé de 3 membres.]{
      \input{input/editor/figsignalingexampleC.tex}}
    \caption[Création d'un réseau superposé sur WebRTC]
    {\label{fig:webrtc}Créer un réseau superposé au dessus de WebRTC.}
  \end{center}
\end{figure*}

\noindent Pour établir une connexion, les navigateurs s'échangent des offres et
acquittements via un médiateur commun (e.g. mails, services dédiés de
signalement, connexions WebRTC connues, etc.). Dans la figure~\ref{editor:fig:webrtcA},
$e_1$ souhaite se connecter à $e_2$. Par conséquent, $e_1$ envoie ses offres au
service de signalement connu. Le nœud $e_2$ récupère l'offre et envoie ses
propres offres en réponse au service de signalement. Enfin, $e_1$ récupère les
offres de $e_2$ et établit une connexion bidirectionnelle avec $e_2$. De manière
identique, $e_3$ établit une connexion avec $e_2$. Désormais, le nœud $e_1$ est
capable d'établir une connexion avec $e_3$ sans passer par l'intermédiaire du
serveur. Pour cela, il utilise $e_2$ comme médiateur. Toutefois, si le nœud
$e_2$ tombe en panne durant cette procédure, la connexion ne pourra s'effectuer
correctement, et ce, même si une route alternative existe (puisque WebRTC ne
gère pas le routage).

\noindent Comparé aux méthodes plus traditionnelles d'établissement de
connexions, les connexions WebRTC sont nettement plus coûteuse à mettre en place
et à entretenir. À ce titre, elles ne doivent pas être établies à la légère.
 

% Utiliser les services de signalement et les connections WebRTC existantes permet
% de déployer facilement les protocoles d'échantillonnage aléatoire de
% pairs~\cite{jelasity2007gossip}. Ces derniers étant présent dans les navigateurs
% modernes disponibles sur les smartphones, les tablettes, etc. Dans ce contexte,
% il est impératif de conserver autant que possible un petit nombre de connections
% afin de réduire le trafic réseau et limiter la consommation de ressources.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../paper"
%%% End:
