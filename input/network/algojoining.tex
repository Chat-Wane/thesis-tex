
\small
\algrenewcommand{\algorithmiccomment}[1]{\hskip2em$\rhd$ #1}

\newcommand{\comment}[1]{\hfill $\rhd$ #1}


\algblockdefx[initially]{initially}{endInitially}
  [0] {\textbf{INITIALLY:}} 

\algsetblockdefx[pas]{pas}{endPas}
  {65535}{}
  [0] {\textbf{EVENTS:}}

\newcommand{\LINEFOR}[2]{%
  \algorithmicfor\ {#1}\ \algorithmicdo\ {#2} %
  }

\newcommand{\LINEIFTHEN}[2]{%
  \algorithmicif\ {#1}\ \algorithmicthen\ {#2} %
  }

\newcommand{\INDSTATE}[1][1]{\State\hspace{\algorithmicindent}}

\begin{algorithmic}[1]
  \Statex
  \initially
    \State $P \leftarrow \varnothing$;
    \hfill \comment{la vue partielle est un multiensemble}
    \State $p$ ; \hfill \comment{identité du nœud local}
  \endInitially
  
  \pas
  \Function{onSubs}{$o$} \comment{$o: origine$}
    \If {($|P| = 0$)}
      \State \textsc{onFwdSub}($o$); \comment{cas particulier : réseau de 2 nœuds.}
    \Else
      \State \DARKBLUE{\LINEFOR{\textbf{each} $\langle q,\,\_\, \rangle \in P$}
      {$\textsc{sendTo}(q$, 'fwdSubs', $o)$;}}
    \EndIf
    \EndFunction
    \Statex
    \Function{onFwdSubs}{$o$} \comment{$o: origine$}
    \State $P \leftarrow P \,\DARKBLUE{\uplus} \left\{\langle o,\, 0 \rangle\right\}$;
    \EndFunction
%%  \endPas
\end{algorithmic}
