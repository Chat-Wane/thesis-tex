
\small
\algrenewcommand{\algorithmiccomment}[1]{\hskip2em$\rhd$ #1}

\newcommand{\comment}[1]{$\rhd$ #1}

\newcommand{\LINEFOR}[2]{%
  \algorithmicfor\ {#1}\ \algorithmicdo\ {#2} %
  }

\newcommand{\LINEWHILE}[2]{%
  \algorithmicwhile\ {#1}\ \algorithmicdo\ {#2} %
  }

\newcommand{\LINEIFTHEN}[2]{%
  \algorithmicif\ {#1}\ \algorithmicthen\ {#2} %
  }

\newcommand{\INDSTATE}[1][1]{\State\hspace{\algorithmicindent}}

\begin{algorithmic}[1]
  \Function{getIndex}{$p\in\mathcal{I},\, i\in\mathcal{I},\, q\in\mathcal{I}$}
  \State \textbf{let} $result \leftarrow -1$;
  \State \textbf{let} $\mathcal{S}' \leftarrow subseq(\mathcal{S},\,p,\,q)$;
  \hfill \comment{get the elements between $p$ and $q$ in $\mathcal{S}$}
  \If{$|\mathcal{S}'| = 0$}
  \State $result \leftarrow indexOf(\mathcal{S},\,q)$;
  \Else
  \State \textbf{let} $tempP,\,tempQ \leftarrow p,\,q$;
  \State \textbf{let} $found,\, i \leftarrow \bot,\,0$;
  \While{$(i<|\mathcal{S'}| \wedge \neg found)$}
  \State \textbf{let} $p',\,d',\,\alpha',\,q' \leftarrow \mathcal{S}'[i]$;
  \State\LINEIFTHEN{$(p' \leq_{\mathcal{S}} p \wedge q \leq_{\mathcal{S}} q')$}
  {$tempP,\, tempQ \leftarrow tempQ,\, \mathcal{S}'[i]$};
  \State\LINEIFTHEN{$(tempQ <_{\mathcal{I}} i)$}
  {$found,\, result \leftarrow \top,\, getIndex(tempP,\,i,\,tempQ)$}
  \EndWhile
  \EndIf
  \State \Return $result$;
  \EndFunction
\end{algorithmic}
